<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <title>Shorts</title>
</head>
<body>
    
    <div class="container" style="margin-top: 10px;">
        <div class="row" style="width: 50%;">

          <div class="col">
            <select name="limit" onchange="limit(event)" class="form-select" id="limit">
              <option>Choose a limit</option>
              <option value="10">10</option>
              <option value="20">20</option>
              <option value="30">30</option>
              <option value="500">ALL</option>
            </select>
          </div>

          <div class="col">
            <select onchange="filter(event)" class="form-select" aria-label="Default select example">
                <option selected>Filter By Title</option>
                <% all.forEach(function(item){ %>
                <option value="<%= item.url %>"><%= item.title %></option>
                <% }); %>
              </select>
          </div>
        </div>
      </div>

      <br>
      <br>
      <br>

    <% if (arr) { %>
        
      <ul>
        <% arr.forEach(function(item){ %>
            
            <iframe width="300" height="600" 
            src="<%= item.url %>" 
            title="The question that ruined Jordan Peterson" 
            frameborder="0" 
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
            allowfullscreen>
            </iframe>

        <% }); %>
      </ul>

      <% } %>

      <script>

        function filter(e){
          const filter = e.target.value;
          window.location.href = `/shorts?filter=${filter}`;
        }

        function limit(e){
          const limit = e.target.value;
          window.location.href = `/shorts?limit=${limit}`;
        }

      </script>

</body>
</html>